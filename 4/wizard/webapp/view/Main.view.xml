<mvc:View
    height="100%"
    controllerName="uppersap.com.wizard.controller.Main"
    xmlns:form="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns:u="sap.ui.unified"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">

    <NavContainer id="wizardNavContainer">
        <pages>
            <Page id="wizardContentPage" showHeader="false">
                <content>
                    <Wizard id="CreateProductWizard" 
                            class="sapUiResponsivePadding--header sapUiResponsivePadding--content"
                            complete="wizardCompletedHandler">

                        <WizardStep id="ProductTypeStep"
                                    title="Product Type"
                                    activate="limpiarVariables"
                                    validated="true"> <MessageStrip class="sapUiSmallMarginBottom" text="El Wizard ayuda a dividir tareas." showIcon="true"/>
                            <HBox alignItems="Center" justifyContent="Center" width="100%">
                                <SegmentedButton width="320px" selectionChange="setProductTypeFromSegmented">
                                    <items>
                                        <SegmentedButtonItem icon="sap-icon://iphone" text="Mobile"/>
                                        <SegmentedButtonItem icon="sap-icon://sys-monitor" text="Desktop"/>
                                        <SegmentedButtonItem icon="sap-icon://database" text="Other"/>
                                    </items>
                                </SegmentedButton>
                            </HBox>
                        </WizardStep>

                        <WizardStep id="ProductInfoStep"
                                    validated="false"
                                    title="Product Information"
                                    activate="additionalInfoValidation">
                            <MessageStrip class="sapUiSmallMarginBottom" text="Validación requerida." showIcon="true"/>
                            <form:SimpleForm editable="true" layout="ResponsiveGridLayout">
                                <Label text="Name" required="true"/>
                                <Input id="ProductName" 
                                      value="{/productName}" 
                                      liveChange="additionalInfoValidation"
                                      valueState="{/productNameState}" 
                                      valueStateText="Mínimo 6 caracteres"/>
                                <Label text="Weight" required="true"/>
                                <Input id="ProductWeight" value="{/productWeight}" type="Number"
                                      liveChange="additionalInfoValidation"
                                      valueState="{/productWeightState}" valueStateText="Debe ser número"/>
                                <Label text="Manufacturer"/>
                                <Select selectedKey="{/productManufacturer}">
                                    <core:Item key="Apple" text="Apple"/>
                                    <core:Item key="Microsoft" text="Microsoft"/>
                                    <core:Item key="Google" text="Google"/>
                                </Select>
                                <Label text="Description"/>
                                <TextArea value="{/productDescription}" rows="2"/>
                            </form:SimpleForm>
                        </WizardStep>

                        <WizardStep id="OptionalInfoStep" validated="true" activate="optionalStepActivation" title="Optional Information">
                            <MessageStrip class="sapUiSmallMarginBottom" text="Paso opcional." showIcon="true"/>
                            <form:SimpleForm editable="true" layout="ResponsiveGridLayout">
                                <Label text="Manufacturing date"/>
                                <DatePicker value="{/manufacturingDate}"/>
                                <Label text="Availability"/>
                                <SegmentedButton selectedKey="{/availabilityType}">
                                    <items>
                                        <SegmentedButtonItem key="In store" text="In store"/>
                                        <SegmentedButtonItem key="In depot" text="In depot"/>
                                    </items>
                                </SegmentedButton>
                                <Label text="Size"/>
                                <Input value="{/size}"/>
                            </form:SimpleForm>
                        </WizardStep>

                        <WizardStep id="PricingStep" activate="pricingActivate" complete="limpiarVariables" validated="true" title="Pricing">
                            <MessageStrip class="sapUiSmallMarginBottom" text="Define precios." showIcon="true"/>
                            <form:SimpleForm editable="true" layout="ResponsiveGridLayout">
                                <Label text="Price"/>
                                <Input value="{/productPrice}" type="Number"/>
                                <Label text="Discount group"/>
                                <ComboBox selectedKey="{/discountGroup}">
                                    <core:Item key="Kids" text="Kids"/>
                                    <core:Item key="Adults" text="Adults"/>
                                </ComboBox>
                                <Label text="VAT is included"/>
                                <CheckBox selected="{/productVAT}"/>
                            </form:SimpleForm>
                        </WizardStep>
                    </Wizard>
                    
                    <Button text="Calcular Impuestos API (Prueba)" enabled="{/navApiEnabled}" class="sapUiSmallMarginBegin" />
                </content>
            </Page>
            
            <Page id="wizardReviewPage" showHeader="false">
                <content>
                    <Title text="Resumen del Producto" titleStyle="H1" class="sapUiMediumMargin"/>
                    
                    <form:SimpleForm title="1. Resumen General" editable="false" layout="ResponsiveGridLayout">
                        <form:content>
                            <Label text="Tipo"/>
                            <Text text="{/productType}"/>
                            <Label text="Nombre"/>
                            <Text text="{/productName}"/>
                            <Label text="Peso"/>
                            <Text text="{/productWeight}"/>
                            <Label text="Precio Final"/>
                            <Text text="{/productPrice}"/>
                        </form:content>
                    </form:SimpleForm>

                    <form:SimpleForm title="2. Detalles Opcionales" editable="false" layout="ResponsiveGridLayout">
                        <form:content>
                            <Label text="Fecha"/>
                            <Text text="{/manufacturingDate}"/>
                            <Label text="Disponibilidad"/>
                            <Text text="{/availabilityType}"/>
                            <Label text="Talla"/>
                            <Text text="{/size}"/>
                        </form:content>
                    </form:SimpleForm>
                </content>
                <footer>
                    <Bar>
                        <contentRight>
                            <Button text="Guardar" type="Accept" press="handleWizardSubmit"/>
                            <Button text="Cancelar" type="Reject" press="handleWizardCancel"/>
                        </contentRight>
                    </Bar>
                </footer>
            </Page>
        </pages>
    </NavContainer>
</mvc:View>